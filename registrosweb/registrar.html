<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registrar Empleado</title>
  <link rel="stylesheet" href="../global.css">
  <link rel="stylesheet" href="registrar.css">
</head>
<body>

<header class="topbar">
    <div class="logo-container">
        <img src="logo.png" class="logo-img" alt="Logo">
    </div>
    <h1 style="color:white;">Registrar Empleado</h1>
    <div class="actions">
        <button onclick="window.location.href='../dashboardweb/web.html'"> Volver</button>
    </div>
</header>

<div class="form-container">

  <!-- IZQUIERDA: Foto -->
  <div class="photo-section">
      <div class="camera-container">
          <video id="video" autoplay playsinline style="width: 100%; height: 180px; object-fit: cover; border-radius: 8px; background: #000;"></video>
          <canvas id="canvas" style="display: none;"></canvas>
      </div>
      <button type="button" id="btnTakePhoto" style="margin-top: 10px; padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">üì∏ Tomar Foto</button>
      <img id="preview" class="preview" src="assets/user-default.png" alt="Foto de perfil" style="display: none;">
  </div>

  <!-- DERECHA: Formulario -->
  <form id="employeeForm">

      <div class="form-group">
          <label>Nombre(s)</label>
          <input type="text" id="nombre">
      </div>

      <div class="form-group">
          <label>Apellido paterno</label>
          <input type="text" id="apellidoP">
      </div>

      <div class="form-group">
          <label>Apellido materno</label>
          <input type="text" id="apellidoM">
      </div>

      <div class="form-group">
          <label>Sucursal</label>
          <select id="sucursal">
            <option value="">Selecciona una</option>
          </select>
          <button type="button" class="btn-small" id="addSucursal">Agregar</button>
      </div>

      <div class="form-group">
          <label>Puesto</label>
          <select id="puesto">
            <option value="">Selecciona un puesto</option>
          </select>
          <button type="button" class="btn-small" id="addPuesto">Agregar</button>
      </div>

      <div class="form-times">
          <div style="max-width: 200px;" >
              <label>Hora entrada</label>
              <input type="time" id="horaEntrada">
          </div>

          <div style="max-width: 200px;">
              <label>Hora salida</label>
              <input type="time" id="horaSalida">
          </div>
      </div>

      <div class="form-times">
          <div
          style="max-width: 200px;">
              <label>Comida (entrada)</label>
              <input type="time" id="comidaEntrada">
          </div>
          <div style="max-width: 200px;">
              <label>Comida (salida)</label>
              <input type="time" id="comidaSalida">
          </div>
      </div>

      <button type="submit" class="btn-guardar">Registrar</button>

  </form>

</div>

<!-- Face API Scripts -->
<script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
<script>
  // Cargar modelos de face-api.js
  async function loadModels() {
    try {
      // Intentar con diferentes URLs de modelos
      const urls = [
        'https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/weights/',
        'https://cdn.jsdelivr.net/npm/@vladmandic/face-api@1.2.0/model/',
        'https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights/'
      ];

      for (const baseUrl of urls) {
        try {
          console.log('Intentando cargar modelos desde:', baseUrl);
          await Promise.all([
            faceapi.nets.tinyFaceDetector.loadFromUri(baseUrl),
            faceapi.nets.faceLandmark68Net.loadFromUri(baseUrl),
            faceapi.nets.faceRecognitionNet.loadFromUri(baseUrl)
          ]);
          console.log('‚úÖ Modelos de face-api.js cargados exitosamente desde:', baseUrl);
          return true;
        } catch (urlError) {
          console.warn('URL fall√≥:', baseUrl, urlError);
          continue;
        }
      }

      console.error('‚ùå No se pudieron cargar los modelos desde ninguna URL');
      return false;
    } catch (error) {
      console.error('‚ùå Error cargando modelos de face-api.js:', error);
      return false;
    }
  }

  // Iniciar carga de modelos
  loadModels();
</script>

<script src="registrar.js"></script>
</body>
</html>
